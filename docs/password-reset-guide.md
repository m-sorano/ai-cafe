# パスワードリセット機能の使用ガイド

## 概要

このドキュメントでは、生成AI相談室アプリケーションのパスワードリセット機能の使用方法と設定について説明します。

## ユーザー向け使用方法

### パスワードをリセットする手順

1. ログインページにアクセスします
2. 「パスワードをお忘れですか？」リンクをクリックします
3. 登録したメールアドレスを入力し、「リセットリンクを送信」ボタンをクリックします
4. メールボックスを確認し、パスワードリセット用のリンクをクリックします
5. 新しいパスワードを入力し、「パスワードを更新」ボタンをクリックします
6. パスワードが更新されたら、新しいパスワードでログインできます

## 開発者向け情報

### 機能の概要

パスワードリセット機能は、Supabaseの認証システムを利用して実装されています。主に以下のコンポーネントで構成されています：

1. **forgot-password.js**: パスワードリセットリクエストを送信するページ
2. **reset-password.js**: 新しいパスワードを設定するページ
3. **login.js**: パスワードリセットリンクを含むログインページ

### Supabaseの設定

パスワードリセット機能を正しく動作させるためには、Supabaseの設定が必要です：

1. **Supabaseダッシュボード**にログインします
2. **Authentication** → **URL Configuration**に移動します
3. **Site URL**が正しく設定されていることを確認します（例：`https://your-domain.com`）
4. **Redirect URLs**に以下のURLを追加します：
   - `https://your-domain.com/reset-password`
   - 開発環境の場合は`http://localhost:3000/reset-password`も追加

### 環境変数

パスワードリセット機能には、以下の環境変数が必要です：

```
NEXT_PUBLIC_SUPABASE_URL=https://your-supabase-url.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key
```

### カスタマイズ

パスワードリセットメールのテンプレートは、Supabaseダッシュボードでカスタマイズできます：

1. **Authentication** → **Email Templates**に移動します
2. **Password Reset**テンプレートを選択します
3. 必要に応じてメールの件名や本文をカスタマイズします
4. **Save**ボタンをクリックして変更を保存します

## トラブルシューティング

### リセットリンクが機能しない場合

1. Supabaseの**Site URL**と**Redirect URLs**が正しく設定されているか確認します
2. ブラウザのコンソールでエラーメッセージを確認します
3. リセットリンクの有効期限が切れていないか確認します（デフォルトでは60分）

### メールが届かない場合

1. スパムフォルダを確認します
2. 入力したメールアドレスが正しいか確認します
3. Supabaseの**Email Provider**が正しく設定されているか確認します

## セキュリティに関する注意事項

- パスワードリセットリンクは一度だけ使用できます
- 新しいパスワードは8文字以上で、数字、小文字、大文字を含める必要があります
- セキュリティ上の理由から、パスワードリセットリクエストの成否にかかわらず同じメッセージが表示されます
